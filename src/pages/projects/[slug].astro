---
import projects from "../../collections/projects.json";
import Layout from "../../layouts/main.astro";

// 1. Obtenemos el slug desde la URL
const { slug } = Astro.params;

// 2. Buscamos el proyecto cuyo p.slug coincida
const project = projects.find(p => p.slug === slug);

// 3. Si no existe, redirigimos al listado (luego puedes hacer un 404 personalizado)
if (!project) {
  return Astro.redirect("/projects");
}
---

<Layout title={project.name}>
  <section class="max-w-3xl mx-auto my-12 px-6">
    <a href="/projects" class="text-sm text-neutral-500 hover:underline">&larr; Volver</a>

    <h1 class="mt-4 text-3xl font-bold dark:text-white">{project.name}</h1>
    <p class="mt-4 text-neutral-700 dark:text-neutral-300">
      {project.description}
    </p>

    {project.image && (
      <div class="mt-8 rounded-xl overflow-hidden border border-neutral-300 dark:border-neutral-700">
        <img
          src={project.image}
          alt={project.name}
          class="w-full object-cover"
          loading="eager"
          decoding="async"
        />
      </div>
    )}
  </section>
</Layout>